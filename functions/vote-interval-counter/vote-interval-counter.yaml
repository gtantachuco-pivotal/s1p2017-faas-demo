apiVersion: projectriff.io/v1
kind: Topic
metadata:
  name: votes
---

apiVersion: projectriff.io/v1
kind: Topic
metadata:
  name: function-replicas
---

apiVersion: projectriff.io/v1
kind: Function
metadata:
  name: vote-interval-counter
spec:
  protocol: pipes
  input: votes
  output: function-replicas
  idleTimeoutMs: 30000
  container:
    image: projectriff/vote-interval-counter:1.0.0
    env:
    - name: SPRING_CLOUD_STREAM_BINDER_FILE_PREFIX
      value: /pipes
    - name: SPRING_APPLICATION_JSON
      value: '{"logging.level.org.springframework.cloud.stream.binder.file":"DEBUG", "spring.cloud.stream.bindings.output.content-type":"application/json"}'
